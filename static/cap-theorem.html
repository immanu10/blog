
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>immanu10 - CAP Theorem</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <h1 id="logo">
            <a href="/blog">immanu10s blog</a>
            <span>*All blogs are generated by AI</span>
        </h1>
        <div>
            <a href="https://github.com/immanu10/" target="_blank">github</a>
            <a href="https://www.linkedin.com/in/immanu10" target="_blank">linkedin</a>
        </div>
    </nav>
    <main>

<div>
    <time>03-Mar-2025</time>
</div>
<h1>CAP Theorem</h1>
<br>
<div id="blog-content"><p>The CAP theorem, also known as Brewer&rsquo;s theorem, states that it is impossible for a distributed data store to simultaneously provide more than two out of the following three guarantees:</p>

<ul>
<li><strong>Consistency:</strong> Every read receives the most recent write or an error.  This means all nodes see the same data at the same time.</li>
<li><strong>Availability:</strong> Every request receives a (non-error) response, without the guarantee that it contains the most recent write. This means the system is always up and running, even if some nodes are down.</li>
<li><strong>Partition tolerance:</strong> The system continues to operate despite an arbitrary number of messages being dropped (or delayed) by the network between nodes. This means the system can handle network failures.</li>
</ul>

<p>In simpler terms, if there&rsquo;s a network partition, you have to choose between consistency and availability. You can&rsquo;t have both.</p>

<p>Let&rsquo;s illustrate with a simplified example of two database servers, Server A and Server B, replicating data.</p>

<p><strong>Scenario 1: Network Partition and Prioritizing Consistency</strong></p>

<p>Imagine a network issue separates Server A and Server B. A client writes new data to Server A.  If we prioritize consistency, Server A won&rsquo;t acknowledge the write until it can confirm with Server B (which it can&rsquo;t reach). This leads to an error or timeout for the client, upholding consistency (no stale data read) but sacrificing availability (client request failed).</p>

<pre><code>// Conceptual JavaScript example (not real implementation)

// Server A receives write request
function writeData(data) {
  if (networkPartitioned) {
    return &quot;Error: Unable to confirm write due to network partition&quot;; // Prioritizing consistency
  } else {
    // ... replicate to Server B ...
    return &quot;Write successful&quot;; 
  }
}
</code></pre>

<p><strong>Scenario 2: Network Partition and Prioritizing Availability</strong></p>

<p>In the same scenario, if we prioritize availability, Server A would acknowledge the write immediately, even though it can&rsquo;t communicate with Server B. This preserves availability (client request succeeds) but sacrifices consistency (Server B has stale data).</p>

<pre><code>// Conceptual JavaScript example (not real implementation)

// Server A receives write request
function writeData(data) {
  if (networkPartitioned) {
    return &quot;Write successful&quot;; // Prioritizing availability (potential inconsistency)
  } else {
    // ... replicate to Server B ...
    return &quot;Write successful&quot;; 
  }
}
</code></pre>

<p><strong>Choosing the Right Balance:</strong></p>

<p>The CAP theorem forces you to make a trade-off. The best choice depends on your specific application needs:</p>

<ul>
<li><strong>CP (Consistency and Partition Tolerance):</strong> Suitable for systems where data consistency is paramount, even at the cost of temporary unavailability during network issues. Examples: financial transactions, distributed databases.</li>
<li><strong>AP (Availability and Partition Tolerance):</strong> Suitable for systems where availability is crucial, even if it means potentially serving slightly stale data. Examples: social media, e-commerce product catalogs.</li>
</ul>

<p>Remember, you cannot choose CA (Consistency and Availability) in a distributed system subject to network partitions. The CAP theorem ensures that in the presence of a partition, you must choose either consistency or availability.</p>
</div>

    </main>
</body>
</html>
