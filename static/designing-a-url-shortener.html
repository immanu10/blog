
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>immanu10 - Designing a URL Shortener</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <h1><a href="/blog">immanu10s blog</h1></a>
        <div>
            <a href="https://github.com/immanu10/" target="_blank">github</a>
            <a href="https://x.com/immanu10x" target="_blank">twitter</a>
        </div>
    </nav>
    <main>

<div>
    <time>03-Jan-2025</time>
</div>
<h1>Designing a URL Shortener</h1>
<br>
<div id="blog-content"><p>A URL shortener, at its core, transforms a long URL into a shorter, more manageable one.  Think bit.ly or tinyurl.com.  When a user submits a long URL, the system generates a unique short code that redirects to the original URL when accessed.  This seemingly simple service presents interesting design challenges at scale.</p>

<p>Here&rsquo;s a breakdown of the key components:</p>

<p><strong>1. Hashing Algorithm:</strong></p>

<p>This is the heart of the system.  It converts a long URL into a short code.  A good hashing algorithm should be:</p>

<ul>
<li><strong>Collision-resistant:</strong>  Minimize the chance of two different long URLs producing the same short code.</li>
<li><strong>Reversible:</strong>  Given a short code, the system should be able to retrieve the original long URL.</li>
<li><strong>Short Code Generation:</strong> Produce short codes that are compact and user-friendly.</li>
</ul>

<p>Popular choices include MD5, SHA-256, or custom base-62 encoding.  A simple base-62 implementation in JavaScript:</p>

<pre><code class="language-javascript">const BASE62 = &quot;0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;;

function shorten(longUrl, id) {
  let shortUrl = &quot;&quot;;
  while (id &gt; 0) {
    shortUrl = BASE62.charAt(id % 62) + shortUrl;
    id = Math.floor(id / 62);
  }
  return shortUrl;
}

// Example
console.log(shorten(&quot;https://www.example.com/very/long/url&quot;, 12345)); // Output: 3d7
</code></pre>

<p><strong>2. Storage:</strong></p>

<p>The system needs to store the mapping between short codes and long URLs.  Key-value stores like Redis are well-suited for this purpose due to their fast read and write speeds.  A relational database like PostgreSQL can also be used for more complex features like analytics.</p>

<p><strong>3. API Endpoint:</strong></p>

<p>The system needs an API endpoint to accept long URLs and return short codes.  This endpoint should handle:</p>

<ul>
<li><strong>URL Validation:</strong> Ensure submitted URLs are valid.</li>
<li><strong>Hashing:</strong> Generate the short code.</li>
<li><strong>Storage:</strong> Save the mapping.</li>
<li><strong>Response:</strong> Return the short code to the user.</li>
</ul>

<p><strong>4. Redirection Service:</strong></p>

<p>When a user accesses a short URL, the system should redirect them to the original long URL.  This involves:</p>

<ul>
<li><strong>Lookup:</strong> Retrieve the original long URL based on the short code.</li>
<li><strong>Redirection:</strong> Send an HTTP redirect response to the user&rsquo;s browser.</li>
</ul>

<p><strong>5. Optional Components:</strong></p>

<ul>
<li><strong>Custom Short URLs:</strong>  Allowing users to choose their short codes.  Requires collision checking.</li>
<li><strong>Analytics:</strong> Tracking click-through rates, geographic location, etc.</li>
<li><strong>Expiration:</strong> Setting expiry dates for short URLs.</li>
</ul>

<p><strong>Scalability Considerations:</strong></p>

<ul>
<li><strong>Database Sharding:</strong> Distribute the data across multiple database servers to handle high traffic.</li>
<li><strong>Caching:</strong> Cache frequently accessed URLs to reduce database load.</li>
<li><strong>Load Balancing:</strong> Distribute traffic across multiple servers to ensure high availability.</li>
</ul>

<p>This overview provides a starting point for designing a URL shortening service.  Remember to consider the specific requirements and constraints of your application when making design choices.</p>
</div>

    </main>
</body>
</html>
