
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>immanu10 - The Raft Consensus Algorithm</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <h1 id="logo">
            <a href="/blog">immanu10s blog</a>
            <span>*All blogs are generated by AI</span>
        </h1>
        <div>
            <a href="https://github.com/immanu10/" target="_blank">github</a>
            <a href="https://www.linkedin.com/in/immanu10" target="_blank">linkedin</a>
        </div>
    </nav>
    <main>

<div>
    <time>22-Feb-2025</time>
</div>
<h1>The Raft Consensus Algorithm</h1>
<br>
<div id="blog-content"><p>Raft is a consensus algorithm designed as a more understandable alternative to Paxos.  It ensures that all servers in a distributed system agree on a single, consistent log of commands, even in the presence of failures.  Raft simplifies the problem by breaking it down into three sub-problems:</p>

<ul>
<li><strong>Leader Election:</strong>  If the current leader fails or is unreachable, a new leader must be elected.</li>
<li><strong>Log Replication:</strong>  The leader accepts new log entries and replicates them to the follower servers.</li>
<li><strong>Safety:</strong>  Raft guarantees that committed log entries are consistent across all servers and will never be overwritten or lost.</li>
</ul>

<p><strong>How Raft Works:</strong></p>

<p>Raft nodes can be in one of three states:  Leader, Follower, or Candidate.</p>

<ol>
<li><p><strong>Leader Election:</strong></p>

<ul>
<li>Each node starts as a follower.</li>
<li>Followers wait for heartbeats from the leader.</li>
<li>If a follower doesn&rsquo;t receive a heartbeat within a timeout period, it becomes a candidate.</li>
<li>The candidate requests votes from other nodes.</li>
<li>If a candidate receives a majority of votes, it becomes the new leader.</li>
</ul></li>

<li><p><strong>Log Replication:</strong></p>

<ul>
<li>The leader receives client requests and appends them to its log.</li>
<li>The leader then replicates these entries to the followers.</li>
<li>Each log entry includes a term number (which increases monotonically with each election) and an index.</li>
</ul></li>

<li><p><strong>Safety:</strong></p>

<ul>
<li>Raft ensures safety through several mechanisms:

<ul>
<li>Election Restrictions:  Only a candidate with an up-to-date log can be elected leader.</li>
<li>Log Matching: The leader forces followers to match its log before committing entries.</li>
<li>Committing Entries: An entry is committed once a majority of followers in the current term have replicated it.</li>
</ul></li>
</ul></li>
</ol>

<p><strong>Simplified Example (Conceptual JavaScript):</strong></p>

<pre><code class="language-javascript">// Server states
const FOLLOWER = 0;
const CANDIDATE = 1;
const LEADER = 2;

// Server object (simplified)
function Server(id) {
  this.id = id;
  this.state = FOLLOWER;
  this.term = 0;
  this.log = [];
  // ... other properties like votedFor, timeout, etc.
}


// Example of a server receiving a vote request
Server.prototype.onRequestVote = function(term, candidateId) {
    if (term &gt; this.term &amp;&amp; this.votedFor === null) {
        this.votedFor = candidateId;
        this.term = term;
        // Send vote granted message to candidate
        return true;
    }
    return false;
};

// Example of leader appending an entry
Server.prototype.appendEntry = function(term, entry) {
    if (term &gt;= this.term) {
        this.term = term;
        this.log.push(entry);
        // Send append successful message to leader
        return true;
    }

    return false;
};


// Create some servers
const server1 = new Server(1);
const server2 = new Server(2);
const server3 = new Server(3);

// ... election logic, heartbeat logic, client interaction logic, etc. would go here


</code></pre>

<p><strong>Key Advantages of Raft:</strong></p>

<ul>
<li><strong>Understandability:</strong>  Raftâ€™s design focuses on understandability, making it easier to implement and reason about.</li>
<li><strong>Strong Leader:</strong>  Having a single leader simplifies log replication and other operations.</li>
<li><strong>Fault Tolerance:</strong> Raft can tolerate the failure of a minority of servers.</li>
</ul>

<p>Raft is a powerful consensus algorithm that provides a robust foundation for building distributed systems. Its simplicity and clarity make it an attractive alternative to more complex algorithms like Paxos.</p>
</div>

    </main>
</body>
</html>
