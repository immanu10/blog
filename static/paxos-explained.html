
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>immanu10 - Paxos Explained</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <h1 id="logo">
            <a href="/blog">immanu10s blog</a>
            <span>*All blogs are generated by AI</span>
        </h1>
        <div>
            <a href="https://github.com/immanu10/" target="_blank">github</a>
            <a href="https://www.linkedin.com/in/immanu10" target="_blank">linkedin</a>
        </div>
    </nav>
    <main>

<div>
    <time>20-Mar-2025</time>
</div>
<h1>Paxos Explained</h1>
<br>
<div id="blog-content"><p>Paxos is a distributed consensus algorithm used to agree on a single value among a group of unreliable processors.  It&rsquo;s foundational to building fault-tolerant distributed systems.  While notoriously difficult to understand, this post breaks down its core components.</p>

<p><strong>The Problem Paxos Solves</strong></p>

<p>Imagine multiple servers need to agree on the next database entry.  Network issues, server crashes, and message delays can make reaching a consistent decision tricky.  Paxos ensures that even with these failures:</p>

<ul>
<li>Only a single value is chosen.</li>
<li>If no failures occur, processes learn the chosen value.</li>
</ul>

<p><strong>Key Roles</strong></p>

<p>Paxos defines three roles that processes can dynamically assume:</p>

<ul>
<li><strong>Proposer:</strong> Proposes values to be agreed upon.</li>
<li><strong>Acceptor:</strong>  Votes on proposed values.</li>
<li><strong>Learner:</strong> Learns the chosen value once consensus is reached.</li>
</ul>

<p>A single process can hold multiple roles.</p>

<p><strong>Phases of Paxos</strong></p>

<p>Paxos operates in two phases:</p>

<p><strong>Phase 1: Prepare</strong></p>

<ol>
<li>A Proposer selects a proposal number <code>n</code> (higher than any it has used before).</li>
<li>The Proposer sends a <code>Prepare(n)</code> message to a majority of Acceptors.</li>
</ol>

<p><strong>Phase 2: Promise</strong></p>

<ol>
<li>If an Acceptor receives <code>Prepare(n)</code> and <code>n</code> is higher than any prepare request it has seen:

<ul>
<li>It promises not to accept any proposal with a number less than <code>n</code>.</li>
<li>If it has already accepted a value, it sends that value and its proposal number back to the Proposer.</li>
</ul></li>
</ol>

<p><strong>Phase 3: Accept</strong></p>

<ol>
<li>If the Proposer receives promises from a majority of Acceptors:

<ul>
<li>It selects a value <code>v</code>.  If any Acceptors sent back previously accepted values, the Proposer chooses the value associated with the highest proposal number.</li>
</ul></li>
<li>The Proposer sends <code>Accept(n, v)</code> to a majority of Acceptors.</li>
</ol>

<p><strong>Phase 4: Accepted</strong></p>

<ol>
<li>If an Acceptor receives <code>Accept(n, v)</code> and it has not promised to ignore proposals numbered <code>n</code>:

<ul>
<li>It accepts the value <code>v</code>.</li>
<li>It sends an <code>Accepted(n, v)</code> message to all Learners.</li>
</ul></li>
</ol>

<p><strong>Example (Simplified)</strong></p>

<p>Let&rsquo;s say we have three Acceptors (A, B, C) and one Proposer (P). P wants to agree on a value (e.g., &ldquo;Hello&rdquo;).</p>

<ol>
<li><strong>Prepare:</strong> P sends <code>Prepare(1)</code> to A, B, and C.</li>
<li><strong>Promise:</strong> A, B, and C respond with promises, as they haven&rsquo;t seen any prior proposals.</li>
<li><strong>Accept:</strong> P sends <code>Accept(1, &quot;Hello&quot;)</code> to A, B, and C.</li>
<li><strong>Accepted:</strong> A, B, and C accept &ldquo;Hello&rdquo; and notify Learners.</li>
</ol>

<p><strong>Fault Tolerance</strong></p>

<p>If a Proposer fails, another can take over with a higher proposal number.  If Acceptors fail, as long as a majority remain, the protocol continues.</p>

<p><strong>JavaScript-like Pseudocode</strong></p>

<pre><code class="language-javascript">// Proposer
function propose(value) {
  let proposalNumber = 1;
  // ... Prepare and Promise phase logic ...
  if (majorityPromised) {
    // ... Accept and Accepted phase logic ...
  }
}

// Acceptor
let promisedNumber = 0;
let acceptedValue = null;
let acceptedNumber = 0;

function receivePrepare(n) {
  if (n &gt; promisedNumber) {
    promisedNumber = n;
    // ... send promise ...
  }
}
// ... other functions ...
</code></pre>

<p>Paxos ensures safety and liveness under certain failure conditions. While complex, understanding its core phases is crucial for building robust distributed systems.</p>
</div>

    </main>
</body>
</html>
